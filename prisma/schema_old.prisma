generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  email        String    @unique
  passwordHash String    @map("password_hash")
  full_name    String?
  role         String?   @default("user")
  createdAt    DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)

  @@map("users")
}

model order_items {
  id         String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  order_id   String?   @db.Uuid
  product_id String?   @db.Uuid
  quantity   Int       @default(1)
  price      Decimal?  @db.Decimal(10, 2)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  orders     orders?   @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  products   products? @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model orders {
  id            String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  customer_name String?
  phone         String?
  email         String?
  total         Decimal?      @db.Decimal(10, 2)
  status        String?       @default("pending")
  created_at    DateTime?     @default(now()) @db.Timestamptz(6)
  order_items   order_items[]
}

model products {
  id          String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name        String
  description String
  price       Decimal?      @db.Decimal
  image_url   String
  category    String?
  in_stock    Boolean?      @default(true)
  created_at  DateTime?     @default(now()) @db.Timestamptz(6)
  order_items order_items[]
}
